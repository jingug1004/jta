<?xml version="1.0" encoding="utf-8"?>

<root>

<!-- 자산 전표작성대상 목록 조회 -->
<query name="/retrieveAssetSlipList"><![CDATA[
SELECT B.COST_SEQ
     , A.REF_ID
     , A.REF_NO
     , A.INOUT_DIV
     , A.KO_APP_TITLE
     , FN_COM_CODE_NAME('INOUT_DIV', A.INOUT_DIV, {@$LANG_CODE}, {@$DEFAULT_LANG_CODE}) INOUT_DIV_NAME
     , D.GRAND_NAME
     , E.DETAIL_NAME
     , FN_COM_CODE_NAME('RIGHT_DIV_ALL', A.RIGHT_DIV, {@$LANG_CODE}, {@$DEFAULT_LANG_CODE}) RIGHT_DIV_NAME
     , B.WON_PRICE
     , B.PRICE
FROM   V_MASTER_ALL A
     , TB_COST_MST B
     , TB_COST_CONSULT C
     , TB_COST_MGT_GRANDCODE D
     , TB_COST_MGT_DETAILCODE E
WHERE  A.REF_ID = B.REF_ID
AND    B.CONSULT_ID = C.CONSULT_ID
AND    B.GRAND_CODE = D.GRAND_CODE
AND    B.DETAIL_CODE = E.DETAIL_CODE
AND    D.GRAND_CODE = E.GRAND_CODE
AND    B.SLIP_STATUS = '1'
AND    B.COST_KIND IN ('1')
AND    B.SLIP_ID IS NULL
AND    C.APPR_NO IS NOT NULL
]]></query>

<!-- 자산 전표 비용목록 조회 -->
<query name="/retrieveAssetSlipCostList"><![CDATA[
SELECT A.REF_ID
     , A.REF_NO
     , A.INOUT_DIV
     , A.KO_APP_TITLE
     , FN_COM_CODE_NAME('INOUT_DIV', A.INOUT_DIV, {@$LANG_CODE}, {@$DEFAULT_LANG_CODE}) INOUT_DIV_NAME
     , D.GRAND_NAME
     , E.DETAIL_NAME
     , FN_COM_CODE_NAME('RIGHT_DIV_ALL', A.RIGHT_DIV, {@$LANG_CODE}, {@$DEFAULT_LANG_CODE}) RIGHT_DIV_NAME
     , B.WON_PRICE
     , B.PRICE
FROM   V_MASTER_ALL A
     , TB_COST_MST B
     , TB_COST_MGT_GRANDCODE D
     , TB_COST_MGT_DETAILCODE E
WHERE  A.REF_ID = B.REF_ID
AND    B.GRAND_CODE = D.GRAND_CODE
AND    B.DETAIL_CODE = E.DETAIL_CODE
AND    D.GRAND_CODE = E.GRAND_CODE
AND    B.SLIP_ID = {@SLIP_ID}
]]></query>

</root>
